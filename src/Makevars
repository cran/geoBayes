# -*- Makefile -*-

PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)


CSRC = auxfcns.c msg.c
FMODSRC = interfaces.f90 msgmc.f90 flogsumexp.f90 lbfgsbmod.f90 pdfy.f90 \
  covfun.f90 pdfw.f90 betaprior.f90
FSRC = bmargin.f90 linkfcn.f90 mcsp2.f90 bfsp.f90 calcb2.f90 \
  llik.f90 mcspz0.f90

# Define the order of compilation
OBJECTS = $(CSRC:.c=.o) $(FMODSRC:.f90=.o) $(FSRC:.f90=.o)

$(SHLIB): $(OBJECTS)

# Setup dependencies for parallel make
bfsp.o: interfaces.o linkfcn.o flogsumexp.o bmargin.o covfun.o pdfy.o pdfw.o \
  betaprior.o
bmargin.o: lbfgsbmod.o flogsumexp.o
calcb2.o: interfaces.o flogsumexp.o covfun.o pdfy.o pdfw.o betaprior.o
covfun.o: interfaces.o
linkfcn.o: interfaces.o
pdfy.o: interfaces.o linkfcn.o
mcsp2.o: linkfcn.o interfaces.o covfun.o msgmc.o pdfy.o betaprior.o
llik.o: covfun.o pdfy.o pdfw.o betaprior.o
mcspz0.o: interfaces.o covfun.o pdfy.o
pdfw.o: interfaces.o pdfy.o
